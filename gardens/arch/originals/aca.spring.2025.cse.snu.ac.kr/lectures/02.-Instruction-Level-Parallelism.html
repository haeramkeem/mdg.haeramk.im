<!DOCTYPE html>
<html><head><title>2. Instruction Level Parallelism (Advanced Computer Architectures, SNU CSE)</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="2. Instruction Level Parallelism (Advanced Computer Architectures, SNU CSE)"/><meta property="og:description" content="서울대학교 컴퓨터공학부 유승주 교수님의 &amp;quot;고급 컴퓨터 구조&amp;quot; 강의를 필기한 내용입니다. 목차 ILP § CPU 는 입력으로 들어온 instruction stream 으로부터 parallelism 을 찾아 그것을 exploit 하는 기술이 구현되어 있고, 이러한 것을 ILP 라고 한다."/><meta property="og:image" content="https://mdg.haeramk.im/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../../../../static/icon.png"/><meta name="description" content="서울대학교 컴퓨터공학부 유승주 교수님의 &amp;quot;고급 컴퓨터 구조&amp;quot; 강의를 필기한 내용입니다. 목차 ILP § CPU 는 입력으로 들어온 instruction stream 으로부터 parallelism 을 찾아 그것을 exploit 하는 기술이 구현되어 있고, 이러한 것을 ILP 라고 한다."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../../../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Gowun Batang:wght@400;700&amp;family=Gowun Dodum:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../../../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch(`../../../../../static/contentIndex.json`).then(data => data.json())</script></head><body data-slug="gardens/arch/originals/aca.spring.2025.cse.snu.ac.kr/lectures/02.-Instruction-Level-Parallelism"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="../../../../..">Madison Digital Garden</a></h1><div class="spacer mobile-only"></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabIndex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabIndex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xmlSpace="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xmlSpace="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div></div><div class="center"><div class="page-header"><div class="popover-hint"><h1 class="article-title ">2. Instruction Level Parallelism (Advanced Computer Architectures, SNU CSE)</h1><p class="content-meta ">Mar 06, 2025, 18 min read</p><ul class="tags "><li><a href="../../../../../tags/arch" class="internal tag-link">#arch</a></li><li><a href="../../../../../tags/originals" class="internal tag-link">#originals</a></li><li><a href="../../../../../tags/snu-aca25s" class="internal tag-link">#snu-aca25s</a></li></ul></div></div><article class="popover-hint"><blockquote class="callout" data-callout="info">
<div class="callout-title">
                  <div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div>
                  <div class="callout-title-inner"><p>서울대학교 컴퓨터공학부 유승주 교수님의 &quot;고급 컴퓨터 구조&quot; 강의를 필기한 내용입니다. </p></div>
                  
                </div>
<ul>
<li><a href="../../../../../gardens/arch/originals/aca.spring.2025.cse.snu.ac.kr/(SNU-CSE)-Advanced-Computer-Architectures" class="internal" data-slug="gardens/arch/originals/aca.spring.2025.cse.snu.ac.kr/(SNU-CSE)-Advanced-Computer-Architectures">목차</a></li>
</ul>
</blockquote>
<h2 id="ilp">ILP<a aria-hidden="true" tabindex="-1" href="#ilp" class="internal"> §</a></h2>
<ul>
<li>CPU 는 입력으로 들어온 instruction stream 으로부터 parallelism 을 찾아 그것을 exploit 하는 기술이 구현되어 있고, 이러한 것을 <a href="../../../../../gardens/arch/ilp/Instruction-Level-Parallelism-(Arch)" class="internal" data-slug="gardens/arch/ilp/Instruction-Level-Parallelism-(Arch)">ILP</a> 라고 한다.
<ul>
<li>다른 parallelism 와 마찬가지로, ILP 도 resource conflict (내가 사용하고자 하는 자원을 지금 사용할 수 있는가?) 와 <a href="../../../../../gardens/arch/dependence/Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/Dependence-(Arch)">Dependence</a> 에 영향을 받는다.</li>
</ul>
</li>
</ul>
<h2 id="dependence-복습">Dependence 복습<a aria-hidden="true" tabindex="-1" href="#dependence-복습" class="internal"> §</a></h2>
<ul>
<li><a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">Data dependence</a> (True dependence): Read after write (RAW) 인 경우.</li>
<li><a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">Anti dependence</a>: Write after read (WAR) 인 경우</li>
<li><a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">Output dependence</a>: Write after write (WAW) 인 경우</li>
<li>Dependence 없으면 당연히 parallel 하게 실행하거나 순서를 바꿀 수 있고, 추가적인 register 를 이용하여 dependence 를 끊는 식으로 parallel execution 이 가능하게 할 수도 있다.</li>
</ul>
<h2 id="dynamic-scheduling">Dynamic Scheduling<a aria-hidden="true" tabindex="-1" href="#dynamic-scheduling" class="internal"> §</a></h2>
<ul>
<li>일단 <em>stall</em> 이라는 것은 아무 일도 하지 않는 CPU cycle 을 말하는 것이다.</li>
<li>그리고 <em>Dynamic Scheduling</em> 이라는 것은 (1) instruction 의 실행 순서를 조정해 stall 이 최소한으로 발생하도록 하되, (2) dependence 는 지킴으로써 execution correctness 는 보장하는 것이다.
<ul>
<li>즉, Out-of-Order (<a href="../../../../../gardens/arch/originals/shpc.fall.2024.cse.snu.ac.kr/drafts/05/Out-of-Order-Execution,-OoO-(Arch)" class="internal" data-slug="gardens/arch/originals/shpc.fall.2024.cse.snu.ac.kr/drafts/05/Out-of-Order-Execution,-OoO-(Arch)">OoO</a>) 와 동일한 용어이다.</li>
<li>이렇게 함으로써 input data 가 준비되는 시점과 functional unit (<a href="../../../../../gardens/arch/originals/shpc.fall.2024.cse.snu.ac.kr/drafts/05/Arithmetic-Logic-Unit,-ALU-(Arch)" class="internal" data-slug="gardens/arch/originals/shpc.fall.2024.cse.snu.ac.kr/drafts/05/Arithmetic-Logic-Unit,-ALU-(Arch)">ALU</a> 등) 을 실행하는 시점 간의 gap 을 줄여 utilization 을 높일 수 있고</li>
<li>추가적으로 execution 에 register 를 더 동적으로 할당하여 효율적으로 사용할 수 있게 할 수 있다.</li>
</ul>
</li>
<li>이것을 CPU 에 구현하는 것은
<ul>
<li>일단 compiler 에게 abstraction 을 제공해줄 수 있다는 장점이 있다: compiler 는 CPU 가 어떻게 instruction 을 execution 하는지 신경쓰지 않아도 된다.</li>
<li>다만, CPU 의 구현 복잡도는 그에 따라 증가한다.</li>
</ul>
</li>
</ul>
<h2 id="scoreboard-architecture">Scoreboard Architecture<a aria-hidden="true" tabindex="-1" href="#scoreboard-architecture" class="internal"> §</a></h2>
<ul>
<li><a href="../../../../../gardens/arch/cpu/drafts/Scoreboard-Architecture-(CPU-Arch)" class="internal" data-slug="gardens/arch/cpu/drafts/Scoreboard-Architecture-(CPU-Arch)">Scoreboard Architecture</a> 는 이 dynamic scheduling 을 제공하는 고전적인 architecture 이다.
<ul>
<li>1964년에 나왔으니까 거의 60년이 넘었다.</li>
</ul>
</li>
</ul>
<h3 id="cpu-cycles">CPU Cycles<a aria-hidden="true" tabindex="-1" href="#cpu-cycles" class="internal"> §</a></h3>
<ul>
<li>기존의 <a href="../../../../../gardens/arch/cpu/drafts/Microprocessor-without-Interlocked-Pipeline-Stages,-MIPS-(Arch)" class="internal" data-slug="gardens/arch/cpu/drafts/Microprocessor-without-Interlocked-Pipeline-Stages,-MIPS-(Arch)">MIPS</a> 에서는 5-stage cycle 을 사용했지만, Scoreboard 에서는 다음의 네 stage 를 사용한다.</li>
<li><em>Issue</em> (<em>ID1</em>):
<ul>
<li>여기서는 instruction decode 를 하고</li>
<li><a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Structure-Hazard-(Arch)">Structure hazard</a> (resource availability) checking 을 수행한다.
<ul>
<li>Decode 를 한 다음에 그것에 필요한 ALU 가 지금 사용할 수 있는지 검사하고,</li>
<li>다른 누군가가 사용중이면 issue 를 하지 않고 대기 (stall) 한다.</li>
<li>이때, output register 도 resource 로 간주한다: 즉, <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAW dependence</a> 가 있을 때에도 issue 를 하지 않고 stall 한다.</li>
</ul>
</li>
</ul>
</li>
<li><em>Read operands</em> (<em>ID2</em>)
<ul>
<li>여기서는 피연산자 (register) 를 읽는다.</li>
<li>이때, 이 값이 준비가 되었는지를 확인하여 읽을 수 있는지 없는지 검사한다.</li>
<li>즉, “읽을 수 있는지 없는지 검사” 한다는 것은 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">RAW dependence</a> 를 검사한다는 뜻이다.</li>
<li>이전에</li>
</ul>
</li>
<li><em>Execute</em> (<em>EX</em>): 뭐 여기서는 명령어를 실행하고 <em>Scoreboard</em> 를 업데이트한다.
<ul>
<li><em>Scoreboard</em> 가 뭔지는 아래에서 구체적으로 나온다.</li>
</ul>
</li>
<li><em>Write result</em> (<em>WB</em>)
<ul>
<li>연산 완료 후, 값을 쓰는 것인데</li>
<li>이때도 마찬가지로 쓰고자 하는 자리가 사용중인지 검사한다.</li>
<li>만약에 해당 자리의 값을 누군가가 읽고있으면, 쓸 수 없고 이때도 stall 이 발생한다.</li>
<li>즉, 이 말은 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAR dependence</a> 를 검사한다는 말과 같다.</li>
</ul>
</li>
</ul>
<h2 id="scoreboard-components">Scoreboard Components<a aria-hidden="true" tabindex="-1" href="#scoreboard-components" class="internal"> §</a></h2>
<ul>
<li><em>Scoreboard</em> 는 약간 현재 상태를 나타내는 metadata 같은 건데 다음과 같이 구성되어 있다.</li>
<li><em>Instruction status</em>: 각 instruction 에 대해, 위의 4가지 CPU cycle 중 어느 stage 에 있는지</li>
<li><em>Functional unit status</em>: 각 functional unit 에 대한 상태값들. 다음의 9개의 field 가 있다:
<ul>
<li><em>Busy</em>: 이 functional unit 이 지금 사용중인지</li>
<li><em>Op</em>: 이 functional unit 이 어떤 작업을 하는 중인지
<ul>
<li>가령 adder 라면, 덧셈인지 뺄셈인지 등</li>
</ul>
</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: Output register 를 나타내는 field</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: Input register 들을 나타내는 field
<ul>
<li>Instruction 은 보통 피연산자가 두개니까 이 두개만 사용하는듯</li>
</ul>
</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: Input register 를 Output register 로 하는 (다른) functional unit 번호
<ul>
<li>즉, functional unit <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></span> 가 output register (<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>) 로 1번 register 를 사용하고 있다면, 1번 register 를 input register (<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>) 로 하는 다른 functional unit <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></span> 는 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> field 에 1이 들어가게 되는 것.</li>
</ul>
</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 각각에 대해 준비되었는지와 읽었는지를 나타내는 flag.
<ul>
<li>여기서 좀 헷갈릴 수 있는데</li>
<li><code>YES</code> 는 준비되었지만 읽지 않았을 때를 의미하고</li>
<li><code>NO</code> 는 준비되지 않았거나 이미 읽었을 때를 의미한다.</li>
</ul>
</li>
</ul>
</li>
<li><em>Register result status</em>: 어떤 functional unit 이 어떤 register 에 값을 쓸 것인지에 대한 정보.
<ul>
<li>즉, functional unit 에게 output register 가 할당된 mapping 이라고 생각하면 된다.</li>
</ul>
</li>
</ul>
<h3 id="scoreboard-example">Scoreboard Example<a aria-hidden="true" tabindex="-1" href="#scoreboard-example" class="internal"> §</a></h3>
<p><img src="../../../../../images/Pasted-image-20250427130915.png" width="auto" height="auto"/></p>
<ul>
<li><code>LD</code> (Load decimal) 두번, <code>MULTD</code> (Multiply decimal), <code>SUBD</code> (Substract decimal), <code>DIVD</code> (Divide decimal), <code>ADDD</code> (Add decimal) 을 수행하는 위의 코드를 어떻게 처리하는지 보자.</li>
</ul>
<h4 id="cycle-1">Cycle 1<a aria-hidden="true" tabindex="-1" href="#cycle-1" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427130851.png" width="auto" height="auto"/></p>
<ul>
<li><em>Instruction status</em>: 일단 LD instruction 이 cycle 1 에 issue 된다.</li>
<li><em>Functional unit status</em>: 이 instruction 을 담당하는 functional unit 이 “Integer” 라고 할 때, 이놈에 대한 상태가 update 된다.
<ul>
<li><em>Busy</em>: 사용중이니까 당연히 <code>YES</code> 가 된다.</li>
<li><em>Op</em>: Load 를 처리중이니까 당연히 <code>LD</code> 가 된다.</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: 할당된 output register 는 보다시피 <code>F6</code> 이다.</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: 첫번째 피연산자는 상수 (+34) 이기 때문에 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 에 input register <code>R2</code> 가 할당된다.</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: Input register 들을 사용하고 있는 다른 functional unit 이 없기 때문에 빈칸으로 남는다.</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>: <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> (<code>R2</code>) 가 (아무도 <code>R2</code> 를 사용하고 있지 않기 때문에) 준비되었지만 아직 읽지는 않았기 때문에 <code>YES</code></li>
</ul>
</li>
<li><em>Register result status</em>: 지금 integer functional unit 이 output register 로 <code>F6</code> 을 이용하고 있기 때문에 해당 result status 가 integer 로 바뀐다.</li>
</ul>
<h4 id="cycle-2">Cycle 2<a aria-hidden="true" tabindex="-1" href="#cycle-2" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427132058.png" width="auto" height="auto"/></p>
<ul>
<li>두번째 <code>LD</code> 를 issue 했으면 좋았겠지만 하나밖에 없는 integer functional unit 이 busy 이기 때문에 issue 되지 않고 첫번째 <code>LD</code> 가 read operand stage 로 진입한다.
<ul>
<li>즉, 위에서 issue stage 에서 <a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Structure-Hazard-(Arch)">Structural hazard</a> 를 검사한다고 했는데, 이것에 걸려서 issue 되지 않은 것.</li>
</ul>
</li>
</ul>
<h4 id="cycle-3">Cycle 3<a aria-hidden="true" tabindex="-1" href="#cycle-3" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427132620.png" width="auto" height="auto"/></p>
<ul>
<li><code>MULTD</code> 를 issue 했으면 좋았겠지만 아직 두번째 <code>LD</code> 가 issue 되지 않았으므로 이놈도 issue 되지 않는다.
<ul>
<li>그리고, 첫번째 <code>LD</code> 가 read operand stage 를 지났기 때문에 input register <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>(<code>R2</code>) 를 읽었고, 따라서 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 <code>NO</code> 로 바뀐다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-4">Cycle 4<a aria-hidden="true" tabindex="-1" href="#cycle-4" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427132841.png" width="auto" height="auto"/></p>
<ul>
<li>첫번째 <code>LD</code> 가 WB 를 하며 integer functional unit 이 free 된다.</li>
</ul>
<h4 id="cycle-5">Cycle 5<a aria-hidden="true" tabindex="-1" href="#cycle-5" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427133417.png" width="auto" height="auto"/></p>
<ul>
<li>이제 두번째 <code>LD</code> 가 issue 된다.
<ul>
<li>보면 cycle 1 일 때와 별반 차이는 없다.</li>
<li>그냥 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 output register 인 <code>F2</code> 로 설정되고, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 는 input register 인 <code>R3</code>, 그리고 이놈이 준비는 됐지만 아직 읽지는 않았기 때문에 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 는 <code>YES</code> 로 설정된다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-6">Cycle 6<a aria-hidden="true" tabindex="-1" href="#cycle-6" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427133630.png" width="auto" height="auto"/></p>
<ul>
<li>(1) 두번째 <code>LD</code> 가 issue 되었고 (2) Mult1 functional unit 이 가용상태이기 때문에 이제 <code>MULTD</code> 가 issue 된다.
<ul>
<li>즉, 이때는 Mult1 이 가용상태여서 <a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Structure-Hazard-(Arch)">Structural hazard</a> 에도 안걸리고, <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAW dependence</a> 도 없기 때문에 issue 가 가능한 것.</li>
</ul>
</li>
<li>그리고 두번째 <code>LD</code> 가 read operand stage 에 진입한다.</li>
<li>여기서 눈여겨 볼 것은 <code>MULTD</code> issue 에 의해 바뀐 Mult1 의 functional unit status 이다.
<ul>
<li>일단 <code>MULTD</code> 의 input register (<span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>) 인 <code>F2</code> 는 두번째 <code>LD</code> 의 output register 이다.</li>
<li>이에 따라 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 가 integer 로 설정되고, 이 값이 아직 준비되지 않았기 때문에 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 가 <code>NO</code> 로 설정된다.</li>
<li>이것을 판단할 때는 아래의 register result status 를 보면 된다:
<ul>
<li>Mult1 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 인 <code>F2</code> 에 대해 register result status 를 보면, integer functional unit 에서 사용중인 것을 알 수 있고, 따라서 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">RAW dependence</a> 이기 때문에 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 가 설정되게 되는 것이다.</li>
</ul>
</li>
</ul>
</li>
<li>그리고 <code>F0</code> 가 output register 로 설정됐기 때문에 register result status 도 <code>F0</code> 에 Mult1 가 설정된다.</li>
</ul>
<h4 id="cycle-7">Cycle 7<a aria-hidden="true" tabindex="-1" href="#cycle-7" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427135441.png" width="auto" height="auto"/></p>
<ul>
<li>일단 두번째 <code>LD</code> 는 exec stage 가 되고</li>
<li><code>MULTD</code> 는 read operand stage 로 가지 못한다.
<ul>
<li>이것은 위에서 말한 대로 read operand stage 에서는 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">RAW dependence</a> 를 검사하는데, 보다시피 두번째 <code>LD</code> 가 아직 종료되지 않아 <code>F2</code> (즉, <code>LD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>) 가 ready 상태가 아니기 때문에 (즉, <code>LD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 가 <code>NO</code> 이기 때문에)  RAW 에 걸려 진행할 수 없는 것.</li>
</ul>
</li>
<li>마지막으로 <code>SUBD</code> 가 issue 된다.
<ul>
<li>왜냐면 <code>SUBD</code> 에 필요한 Add functional unit 이 가용상태이고 (즉, <a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Structure-Hazard-(Arch)">Structural hazard</a> 가 아니고) output register 인 <code>F8</code> 에 대해 다른 instruction 이 write 를 하지 않기 (즉, <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAW dependence</a> 가 아니기) 때문이다.</li>
<li>이놈에 대한 functional unit status 를 보면 위에서 본 내용이랑 동일하다:
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 인 <code>F2</code> 가 두번째 <code>LD</code> 의 output 이기 때문에 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 에는 integer, <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 는 NO 가 되는 것.</li>
</ul>
</li>
<li>그리고 이놈에 대한 register result status 도 마찬가지다:
<ul>
<li><code>SUBD</code> 의 functional unit 인 Add 가 <code>F8</code> 에 결과를 뱉기 때문에 그에 따라 업데이트된다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="cycle-8">Cycle 8<a aria-hidden="true" tabindex="-1" href="#cycle-8" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427143234.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 8 이 되면 일단 <code>DIVD</code> 가 issue 되며 divide functional unit 이 갱신된다.
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 인 <code>F0</code> 가 Multd 의 output register 이기 때문에 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 가 저렇게 세팅된다.</li>
</ul>
</li>
<li>그리고 이때가 되면 두번째 <code>LD</code> 가 끝나며 <code>F2</code> 가 ready 가 된다.
<ul>
<li>이것을 기다리고 있는 놈은 두개이다: <code>MULTD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>, <code>SUBD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>.</li>
<li>따라서 <code>MULTD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <code>SUBD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 사라지고,</li>
<li><code>MULTD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <code>SUBD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 <code>YES</code> 로 바뀐다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-9">Cycle 9<a aria-hidden="true" tabindex="-1" href="#cycle-9" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427143857.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 8 에서 <code>F2</code> 가 ready 가 됨에 따라 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">RAW hazard</a> 가 해소되고 따라서 cycle 9 에서 <code>MULTD</code> 와 <code>SUBD</code> 가 모두 read operand stage 가 된다.
<ul>
<li>당연히 이 둘은 서로 다른 functional unit (Mult1, Add) 를 사용하기 때문에 parallel 하게 처리되는 것.</li>
<li>하지만 <code>DIVD</code> 는 여전히 read operand 를 하지 못한다. 당연히 <code>DIVD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 인 <code>F0</code> 이 <code>MULTD</code> 의 output 이기 때문에 RAW 가 여전히 남아있기 때문.</li>
</ul>
</li>
<li>그리고 <code>ADDD</code> 는 issue 되지 못한다. <code>SUBD</code> 에서 Add functional unit 을 사용하고 있어서 <a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Structure-Hazard-(Arch)">Structural hazard</a> 에 걸리게 되는 것.</li>
<li>추가적으로, Functional unit status 에 저 <em>Time</em> field 에 주목하자. 이것은 각 functional unit 이 작업을 완료하는데에 걸리는 시간으로, 앞으로 cycle 이 진행됨에 따라 하나씩 줄어들 것이다.</li>
</ul>
<h4 id="cycle-10">Cycle 10<a aria-hidden="true" tabindex="-1" href="#cycle-10" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427144540.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 10 에서는 <code>MULTD</code> 와 <code>SUBD</code> 가 read operand 를 했기 때문에 일단 이놈들의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 모두 <code>NO</code> 로 바뀌게 된다.</li>
<li>그리고 cycle 9 에서 말한 대로 Mult1 와 Add functional unit 의 counter 가 하나씩 줄어든다.</li>
</ul>
<h4 id="cycle-11">Cycle 11<a aria-hidden="true" tabindex="-1" href="#cycle-11" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427144557.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 11 이 되면 Add functional unit 이 종료되며 <code>SUBD</code> 의 exec 이 완료되고</li>
</ul>
<h4 id="cycle-12">Cycle 12<a aria-hidden="true" tabindex="-1" href="#cycle-12" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427145334.png" width="auto" height="auto"/></p>
<ul>
<li>그리고 Cycle 12 에서 이제 <code>SUBD</code> 가 종료되고, 이에 따라 Add functional unit 이 free 가 된다.
<ul>
<li>근데 생각해 보면 <code>SUBD</code> 는 <code>MULTD</code> 의 다음에 실행되어야 하는 instruction 이었다. 근데 <code>SUBD</code> 가 먼저 끝났다는 것은, 이 시점부터 <a href="../../../../../gardens/arch/originals/shpc.fall.2024.cse.snu.ac.kr/drafts/05/Out-of-Order-Execution,-OoO-(Arch)" class="internal" data-slug="gardens/arch/originals/shpc.fall.2024.cse.snu.ac.kr/drafts/05/Out-of-Order-Execution,-OoO-(Arch)">Out-of-Order execution</a> 이 발생하게 되는 것으로 생각할 수 있다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-13">Cycle 13<a aria-hidden="true" tabindex="-1" href="#cycle-13" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427145314.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 13 이 되면 <code>SUBD</code> 가 cycle 12 에 끝나 Add functional unit 이 free 되므로 (<a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Structure-Hazard-(Arch)">Structural hazard</a> 가 해소되어) <code>ADDD</code> 가 issue 된다.
<ul>
<li>그리고 이놈의 input register 는 모두 register result status 에서 해당 란이 비어있기 때문에 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">RAW dependence</a> 가 없고, 따라서 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 YES 가 된다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-14">Cycle 14<a aria-hidden="true" tabindex="-1" href="#cycle-14" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427150226.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 14 에서는 (cycle 13 에서 말한 대로) <code>ADDD</code> 에게 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">RAW dependence</a> 가 없기 때문에 바로 read operand 가 완료된다.
<ul>
<li>그리고 Add functional unit 의 latency 는 2cycle 이었기 때문에, functional unit status 옆에 2가 채워져 있는 것도 확인할 수 있다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-16-skip-cycle-15">Cycle 16 (Skip cycle 15)<a aria-hidden="true" tabindex="-1" href="#cycle-16-skip-cycle-15" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427150553.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 15 는 아무것도 안해서 skip 하고 cycle 16 을 보면</li>
<li>이때 Add functional unit 이 종료되어 <code>ADDD</code> 의 exec comp 가 16으로 채워진다.</li>
</ul>
<h4 id="cycle-17">Cycle 17<a aria-hidden="true" tabindex="-1" href="#cycle-17" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427150808.png" width="auto" height="auto"/></p>
<ul>
<li>하지만 cycle 17 에서는 <code>ADDD</code> 를 write result stage 로 보낼 수 없다.
<ul>
<li>이것은 왜냐면 <code>ADDD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 는 <code>F6</code> 이기 때문에, 여기에 값을 써야 하는데</li>
<li>이전 instruction 인 <code>DIVD</code> 에서 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 동일하게 <code>F6</code> 으로 되어 있고</li>
<li>이것에 대한 readiness 인 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 <code>YES</code> 로 되어 있는 것으로 보아 아직 기존에 <code>F6</code> 에 있던 값을 읽지 않았기 때문에</li>
<li>만약 <code>ADDD</code> 가 <code>F6</code> 에 값을 써버리게 되면 <code>DIVD</code> 가 읽지 않은 것을 overwrite 하기 때문이다.</li>
<li>즉, <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAR dependence</a> 에 걸려서 stall 이 된다.</li>
</ul>
</li>
<li>이것은 나중에 배울 <a href="../../../../../gardens/arch/ilp/drafts/Tomasulo's-Algorithm-(Arch)" class="internal" data-slug="gardens/arch/ilp/drafts/Tomasulo's-Algorithm-(Arch)">Tomasulo’s Algorithm</a> 에 의해 해결될 수 있다.</li>
</ul>
<h4 id="cycle-19-skip-cycle-18">Cycle 19 (Skip cycle 18)<a aria-hidden="true" tabindex="-1" href="#cycle-19-skip-cycle-18" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427151316.png" width="auto" height="auto"/></p>
<ul>
<li>Cycle 18 에서도 아무것도 안하기 때문에 skip 하고 cycle 19 를 보면 드디어 <code>MULTD</code> 의 execution 이 끝난다.
<ul>
<li>이에 따라 <code>MULTD</code> 의 exec comp 가 19 로 되어 있는 것을 알 수 있다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-20">Cycle 20<a aria-hidden="true" tabindex="-1" href="#cycle-20" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427151441.png" width="auto" height="auto"/></p>
<ul>
<li>이에 따라 cycle 20 에서 write result stage 가 끝나고 Mult1 의 functional unit 이 free 가 된다.
<ul>
<li>그리고 이에 따라 F0 에 대한 <code>DIVD</code> 와 <code>MULTD</code> 사이의 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">RAW dependence</a> 가 해소되고</li>
<li>따라서 <code>DIVD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 가 YES 로 바뀐다.</li>
</ul>
</li>
</ul>
<h4 id="cycle-21-22">Cycle 21, 22<a aria-hidden="true" tabindex="-1" href="#cycle-21-22" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427151455.png" width="auto" height="auto"/></p>
<ul>
<li>그래서 드디어 cycle 21 에서 <code>DIVD</code> 의 read operand stage 가 끝나고</li>
</ul>
<p><img src="../../../../../images/Pasted-image-20250427151508.png" width="auto" height="auto"/></p>
<ul>
<li>이에 따라 cycle 22 에서는 <code>DIVD</code> 의 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> 와 <span class="math math-inline"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> 가 모두 <code>NO</code> 로 바뀐다.</li>
<li>근데 <code>ADDD</code> 와 <code>DIVD</code> 사이에는 <code>F6</code> 에 대해 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAR dependence</a> 가 있었고, 이제는 이것이 해소되었기 때문에 <code>ADDD</code> 가 드디어 write result stage 로 옮겨가는 것을 알 수 있다.</li>
</ul>
<h4 id="cycle-62-skip-cycle-23--61">Cycle 62 (Skip cycle 23 ~ 61)<a aria-hidden="true" tabindex="-1" href="#cycle-62-skip-cycle-23--61" class="internal"> §</a></h4>
<p><img src="../../../../../images/Pasted-image-20250427152635.png" width="auto" height="auto"/></p>
<ul>
<li>Divide functional unit 의 실행시간이 아주 길기 때문에 그 사이 과정을 다 skip 하고 DIVD 가 종료된 cycle 62 로 바로 가보자.</li>
<li>이때 instruction status 에서 볼 수 있다시피 issue 는 in-order 로 했지만, 실행 (read operand &amp; exec complete) 와 commit (write result) 는 Out-of-order 로 이루어지고 있는 것을 알 수 있다.</li>
</ul>
<h3 id="improvements-scoreboard-architecture">Improvements Scoreboard Architecture<a aria-hidden="true" tabindex="-1" href="#improvements-scoreboard-architecture" class="internal"> §</a></h3>
<ul>
<li><a href="../../../../../gardens/arch/cpu/terms/Data-Forwarding-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Data-Forwarding-(Arch)">Data forwarding</a>: <a href="#cycle-9" class="internal">Cycle 9</a> 를 보면 두번째 LD 의 exec 이 cycle 7 에 끝났는데 cycle 8 에 write result 한 후 cycle 9 에서야 MULTD 가 read operand 를 한다. 이것은 cycle 7 이 끝난 다음 바로 MULTD 에 데이터를 찔러주는 data forwarding 을 이용하면 cycle 을 줄일 수 있을 것이다.</li>
<li><a href="../../../../../gardens/arch/cpu/drafts/Reservation-Station-(Arch)" class="internal" data-slug="gardens/arch/cpu/drafts/Reservation-Station-(Arch)">Reservation station</a>: <a href="#cycle-2" class="internal">Cycle 2</a> 에서 보면 integer functional unit 이 부족해 (<a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal" data-slug="gardens/arch/cpu/terms/Structure-Hazard-(Arch)">Structural hazard</a>) 두번째 LD 가 issue 되지 않는다. 이것은 issue buffer 인 reservation station 을 사용하여 해결할 수 있을 것이다.</li>
<li><a href="../../../../../gardens/arch/cpu/drafts/Reorder-Buffer-(Arch)" class="internal" data-slug="gardens/arch/cpu/drafts/Reorder-Buffer-(Arch)">Reorder buffer</a>: 위의 예제에서는 없지만, <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAW dependence</a> 가 있을 경우 issue 를 할 수 없다. 그리고 <a href="#cycle-17" class="internal">Cycle 17</a> 에서 보면 <a href="../../../../../gardens/arch/dependence/terms/Data-Dependence-(Arch)" class="internal" data-slug="gardens/arch/dependence/terms/Data-Dependence-(Arch)">WAR dependence</a> 에 의해 stall 되는 것을 확인할 수 있다. 이것은 write buffer 인 reorder buffer 를 사용하면 해결할 수 있다.</li>
</ul></article></div><div class="right sidebar"><div class="graph "><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xmlSpace="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#ilp" data-for="ilp">ILP</a></li><li class="depth-0"><a href="#dependence-복습" data-for="dependence-복습">Dependence 복습</a></li><li class="depth-0"><a href="#dynamic-scheduling" data-for="dynamic-scheduling">Dynamic Scheduling</a></li><li class="depth-0"><a href="#scoreboard-architecture" data-for="scoreboard-architecture">Scoreboard Architecture</a></li><li class="depth-1"><a href="#cpu-cycles" data-for="cpu-cycles">CPU Cycles</a></li><li class="depth-0"><a href="#scoreboard-components" data-for="scoreboard-components">Scoreboard Components</a></li><li class="depth-1"><a href="#scoreboard-example" data-for="scoreboard-example">Scoreboard Example</a></li><li class="depth-1"><a href="#improvements-scoreboard-architecture" data-for="improvements-scoreboard-architecture">Improvements Scoreboard Architecture</a></li></ul></div></div><div class="backlinks "><h3>Backlinks</h3><ul class="overflow"><li><a href="../../../../../gardens/arch/cpu/drafts/Common-Data-Bus,-CDB-(CPU-Arch)" class="internal">Common Data Bus, CDB (CPU Arch)</a></li><li><a href="../../../../../gardens/arch/cpu/drafts/Scoreboard-Architecture-(CPU-Arch)" class="internal">Scoreboard Architecture (CPU Arch)</a></li><li><a href="../../../../../gardens/arch/cpu/drafts/Store-Buffer-(Arch)" class="internal">Store Buffer (Arch)</a></li><li><a href="../../../../../gardens/arch/cpu/terms/Branch-Prediction-(Arch)" class="internal">Branch Prediction (Arch)</a></li><li><a href="../../../../../gardens/arch/cpu/terms/Data-Forwarding-(Arch)" class="internal">Data Forwarding (Arch)</a></li><li><a href="../../../../../gardens/arch/cpu/terms/Structure-Hazard-(Arch)" class="internal">Structure Hazard (Arch)</a></li><li><a href="../../../../../gardens/arch/originals/aca.spring.2025.cse.snu.ac.kr/(SNU-CSE)-Advanced-Computer-Architectures" class="internal">(SNU CSE) Advanced Computer Architectures</a></li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.1.0</a>, © 2025</p><ul><li><a href="https://github.com/haeramkeem">GitHub</a></li><li><a href="https://www.linkedin.com/in/haeram-kim-277404220">LinkedIn</a></li><li><a href="mailto:haeram.kim1@gmail.com">Email</a></li></ul></footer></div></body><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="https://www.googletagmanager.com/gtag/js?id=G-N68CCP1QHG" type="application/javascript"></script><script src="../../../../../postscript.js" type="module"></script></html>